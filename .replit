# Replit 主配置文件（根目录）

language = "python3"

# 入口文件
entrypoint = "backend/collector.py"

# 运行命令
run = ["sh", "-c", "cd backend && uv sync && uv run python collector.py"]

# 构建配置
[build]
# 构建时安装依赖
run = ["sh", "-c", "cd backend && uv sync"]

# Nix 包管理 - 直接安装 uv
[nix]
channel = "stable-25_05"
packages = ["python312", "uv"]

# 部署配置
[deployment]
deploymentTarget = "scheduled"
# 定时任务
run = ["sh", "-c", "cd backend && uv sync --no-dev && uv run python collector.py"]

# 环境变量
[env]
PYTHONIOENCODING = "utf-8"
PYTHONUNBUFFERED = "1"
